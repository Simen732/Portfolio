let pokemonCount = 151;
var pokedex = {};
// import { copypasta } from "./pokemonKreft";



 
window.onload = async function() {

    for (let i = 1; i <= pokemonCount; i++) {
        await getPokemon(i)
        let pokemon = document.createElement("div");
        pokemon.id = i;
        pokemon.innerText = i.toString() + ". " + pokedex[i].name.toUpperCase();
        pokemon.classList.add("pokemonName");
        console.log(pokedex)
        pokemon.addEventListener("click", updatePokemon);
        document.getElementById("pokemonList").append(pokemon);

        let input = document.getElementById("inputButton");
        input.addEventListener("click", await searchPokemon);
    }

    document.getElementById("pokemonDetails").innerText = pokedex[1]["details"];
}



async function getPokemon(num){
    let url = "https://pokeapi.co/api/v2/pokemon/" + num.toString();
    
    let response = await fetch(url);
    let pokemon =  await response.json();
    let pokemonName = pokemon["name"]
    let pokemonType = pokemon["types"]
    let pokemonImg = pokemon.sprites.front_default


    response = await fetch(pokemon.species.url)
    let pokemonDetails = await response.json();


    pokemonDetails = pokemonDetails.flavor_text_entries[9].flavor_text

    pokedex[num] = {name: pokemonName, img: pokemonImg, type: pokemonType, details: pokemonDetails, img: pokemonImg}
    console.log(url)
    return url;
}


async function updatePokemon(){
    document.getElementById("pokemonImg").src = pokedex[this.id].img;
    
    let typesDiv = document.getElementById("pokemonType");
    while (typesDiv.firstChild) {
        typesDiv.firstChild.remove();
    }

    let types = pokedex[this.id]["type"];
    for (let i = 0; i < types.length; i++) {
        let typeBox = document.createElement("span");
        typeBox.classList.add("typeBox");
        typeBox.classList.add(types[i].type.name);
        typeBox.innerText = types[i].type.name.toUpperCase() + " "; 
        typesDiv.append(typeBox);
    }
    console.log(pokedex[this.id]["details"]);
    console.log(pokedex[this.id]);
    document.getElementById("pokemonDetails").innerHTML = pokedex[this.id]["details"];


    
// setTimeout(() => {
//     const pokemonDetailsElem = document.getElementById("pokemonDetails").innerHTML;
//     if(pokemonDetailsElem) {
//         pokemonDetailsElem.innerText = pokedex[this.id]["details"];
//     } else {
//         console.log("Element with ID 'pokemonDetails' not found");
//     }
// }, 100); // Delay in milliseconds, you can adjust this as needed
}

async function searchPokemon(){
    if (document.getElementById("pokemonInput").value == "") {
        alert("You must enter a valid Pokemon name");
    }
    else {
        let input = document.getElementById("pokemonInput").value
        console.log(document.getElementById("pokemonInput").value);
        let nummber = await getPokemon(document.getElementById("pokemonInput").value);

        console.log(nummber)
        console.log(pokedex[nummber.img]);
        document.getElementById("pokemonImg").src = pokedex[1].img;
        console.log(document.getElementById("pokemonImg").src = pokedex[input].img);
        if (input == 134){
            copypasta();
            document.getElementById("pokemonDetails").innerText = copypasta;
            console.log(copypasta)
        }
        else{
            document.getElementById("pokemonDetails").innerText = pokedex[input].details;
        }
        let typesDiv = document.getElementById("pokemonType");
        while (typesDiv.firstChild) {
            typesDiv.firstChild.remove();
        }
        let types = pokedex[input]["type"];
        console.log(types);
        for (let i = 0; i < types.length; i++) {
            let typeBox = document.createElement("span");
            typeBox.classList.add("typeBox");
            typeBox.classList.add(types[i].type.name);
            typeBox.innerText = types[i].type.name.toUpperCase() + " "; 
            typesDiv.append(typeBox);
        }
    }


        

    document.getElementById("inputButton").addEventListener("click", function() {
        // Create an anchor element
        var link = document.createElement('a');
        // Set the href attribute to the file's URL
        link.href = 'path/to/your/file.ext'; // Replace 'path/to/your/file.ext' with the actual path to your file
        // Set the download attribute to specify the file's name
        link.download = 'filename.ext'; // Replace 'filename.ext' with the desired filename
        // Append the anchor element to the body
        document.body.appendChild(link);
        // Trigger a click event on the anchor element
        link.click();
        // Remove the anchor element from the body
        document.body.removeChild(link);
    });













































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































function copypasta() {
    let = copypasta = "Hey guys, did you know that in terms of male human and female Pokémon breeding, Vaporeon is the most compatible Pokémon for humans?"
 }
}